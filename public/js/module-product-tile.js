(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["module-product-tile"],{

/***/ "./cartridges/app_accelerator_core/cartridge/client/default/js/modules/module.product-tile.js":
/*!****************************************************************************************************!*\
  !*** ./cartridges/app_accelerator_core/cartridge/client/default/js/modules/module.product-tile.js ***!
  \****************************************************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return ProductTile; });\n/* harmony import */ var _product_productUtils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../product/productUtils */ \"./cartridges/app_accelerator_core/cartridge/client/default/js/product/productUtils.js\");\n/* harmony import */ var _borngroup_born_utilities__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @borngroup/born-utilities */ \"./node_modules/@borngroup/born-utilities/dist/born-utilities.min.js\");\n/* harmony import */ var _borngroup_born_utilities__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_borngroup_born_utilities__WEBPACK_IMPORTED_MODULE_1__);\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n\n\n\nvar ProductTile = /*#__PURE__*/function () {\n  function ProductTile(options) {\n    _classCallCheck(this, ProductTile);\n\n    Object(_borngroup_born_utilities__WEBPACK_IMPORTED_MODULE_1__[\"callbackOnElements\"])(options.elements, this.setupTile.bind(this));\n  }\n\n  _createClass(ProductTile, [{\n    key: \"setupTile\",\n    value: function setupTile(currentTile) {\n      this.setPermanentImageData(currentTile);\n      this.setupSwatches(currentTile);\n      this.setupSecondaryImageDisplay(currentTile);\n    }\n  }, {\n    key: \"setupSwatches\",\n    value: function setupSwatches(currentTile) {\n      var _this = this;\n\n      var swatches = currentTile.querySelectorAll('[data-product-swatch]'),\n          swatchesContainer = currentTile.querySelector('[data-product-component=\"swatches\"]');\n      [].forEach.call(swatches, function (currentSwatch) {\n        return _this.setupSingleSwatch(currentSwatch, currentTile);\n      });\n\n      if (swatchesContainer) {\n        swatchesContainer.addEventListener('mouseleave', function () {\n          Object(_product_productUtils__WEBPACK_IMPORTED_MODULE_0__[\"updateImages\"])(currentTile.permanentImageData, currentTile);\n        });\n      }\n    }\n  }, {\n    key: \"setupSingleSwatch\",\n    value: function setupSingleSwatch(currentSwatch, currentTile) {\n      var swatchData = JSON.parse(currentSwatch.getAttribute('data-product-swatch'));\n      currentSwatch.addEventListener('click', this.swatchSelectHandler.bind(this, swatchData, currentSwatch, currentTile));\n      currentSwatch.addEventListener('mouseenter', _product_productUtils__WEBPACK_IMPORTED_MODULE_0__[\"updateImages\"].bind(this, swatchData.images, currentTile, undefined));\n    }\n  }, {\n    key: \"swatchSelectHandler\",\n    value: function swatchSelectHandler(swatchData, currentSwatch, currentTile, evt) {\n      evt.preventDefault();\n      Object(_product_productUtils__WEBPACK_IMPORTED_MODULE_0__[\"updateImages\"])(swatchData.images, currentTile);\n      Object(_product_productUtils__WEBPACK_IMPORTED_MODULE_0__[\"updateURLs\"])(currentSwatch.getAttribute('data-query-string'), currentTile);\n      this.unselectAllSwatches(currentTile);\n      this.setSelected(currentSwatch, currentTile);\n      currentTile.permanentImageData = swatchData.images;\n    }\n  }, {\n    key: \"unselectAllSwatches\",\n    value: function unselectAllSwatches(currentTile) {\n      var currentSelectedSwatches = currentTile.querySelectorAll('[data-product-swatch].selected');\n      [].forEach.call(currentSelectedSwatches, function (currentSwatch) {\n        return currentSwatch.classList.remove('selected');\n      });\n    }\n  }, {\n    key: \"setSelected\",\n    value: function setSelected(currentSwatch) {\n      currentSwatch.classList.add('selected');\n    }\n  }, {\n    key: \"setPermanentImageData\",\n    value: function setPermanentImageData(currentTile) {\n      var productImages = currentTile.querySelectorAll('[data-product-component=\"image\"]');\n      currentTile.permanentImageData = [];\n      [].forEach.call(productImages, function (currentImage) {\n        currentTile.permanentImageData[currentImage.getAttribute('data-image-index')] = {\n          url: currentImage.src || currentImage.getAttribute('data-src'),\n          title: currentImage.title,\n          alt: currentImage.alt\n        };\n      }.bind(this));\n    } //This utility adds a special class \"set--images-lazy-loaded\" to the product tiles.\n    //This class is the used in the CSS to ensure that the \"main\" product image is not hidden when hovering on a tile.\n    //This is necessary because the product images are transparent, and on hover the secondary image must show.\n    //The secondary image however needs to be fully loaded before letting the tile show it, hence the need for this snippet.\n\n  }, {\n    key: \"setupSecondaryImageDisplay\",\n    value: function setupSecondaryImageDisplay(currentTile) {\n      currentTile.addEventListener('lazyloaded', function (evt) {\n        if (evt.target.dataset.imageIndex > 0) {\n          currentTile.classList.add('set--images-lazy-loaded');\n        }\n      });\n    }\n  }]);\n\n  return ProductTile;\n}();\n\n\n\n//# sourceURL=webpack:///./cartridges/app_accelerator_core/cartridge/client/default/js/modules/module.product-tile.js?");

/***/ })

}]);